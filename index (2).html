<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта с маркерами и маршрутами</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
    <style>
        #map {
            height: 100vh;
        }
        #markerForm {
            display: none;
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border: 1px solid #ccc;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="markerForm">
        <h3>Добавить маркер</h3>
        <form id="form">
            <label for="title">Название:</label><br>
            <input type="text" id="title" name="title"><br>
            <label for="imageUrl">URL изображения:</label><br>
            <input type="text" id="imageUrl" name="imageUrl"><br>
            <label for="description">Описание:</label><br>
            <textarea id="description" name="description"></textarea><br>
            <input type="hidden" id="lat" name="lat">
            <input type="hidden" id="lng" name="lng">
            <button type="button" onclick="saveMarker()">Сохранить</button>
        </form>
    </div>

    <script>
        // Инициализация карты
        var map = L.map('map').setView([56.838010, 60.597465], 12); // Координаты по умолчанию

        // Добавление тайлов
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Геолокация
        map.locate({setView: true, maxZoom: 16});

        // Обработка события геолокации
        function onLocationFound(e) {
            var radius = e.accuracy / 2;

            L.marker(e.latlng).addTo(map)
                .bindPopup("Вы находитесь в радиусе " + radius + " метров от этой точки").openPopup();

            L.circle(e.latlng, radius).addTo(map);
        }

        // Обработка ошибки геолокации
        function onLocationError(e) {
            alert(e.message);
        }

        map.on('locationfound', onLocationFound);
        map.on('locationerror', onLocationError);

        // Создание пользовательских иконок
        var customIcon1 = L.icon({
            iconUrl: 'image/image.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

        var customIcon2 = L.icon({
            iconUrl: 'image/image1.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon3 = L.icon({
            iconUrl: 'image/image2.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon4 = L.icon({
            iconUrl: 'image/image3.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon5 = L.icon({
            iconUrl: 'image/image4.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon6 = L.icon({
            iconUrl: 'image/image5.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon7 = L.icon({
            iconUrl: 'image/image6.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon8 = L.icon({
            iconUrl: 'image/image7.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon9 = L.icon({
            iconUrl: 'image/image8.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon10 = L.icon({
            iconUrl: 'image/image9.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon11 = L.icon({
            iconUrl: 'image/image10.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon12 = L.icon({
            iconUrl: 'image/image11.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon13 = L.icon({
            iconUrl: 'image/image12.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon14 = L.icon({
            iconUrl: 'image/image13.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon15 = L.icon({
            iconUrl: 'image/image14.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon16 = L.icon({
            iconUrl: 'image/image15.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

	var customIcon17 = L.icon({
            iconUrl: 'image/image16.png', // Путь к вашему изображению иконки
            iconSize: [32, 32], // Размер иконки
            iconAnchor: [16, 32], // Точка привязки иконки (центр нижней части)
            popupAnchor: [0, -32] // Точка привязки всплывающего окна
        });

        // Функция для добавления маркера с иконкой
        function addMarker(lat, lng, title, imageUrl, description, icon) {
            var popupContent = `
                <h3>${title}</h3>
                <img src="${imageUrl}" alt="${title}" style="width: 100%; height: auto;">
                <p>${description}</p>
            `;
            L.marker([lat, lng], { icon: icon }).addTo(map)
                .bindPopup(popupContent);
        }

        // Примеры маркеров с иконками
        addMarker(56.844369, 60.608346, 'Храм-на-Крови', 'image/image1.jpg', 'Церковь, построенная на месте Ипатьевского дома, где Николай II, последний император России, и его семья вместе с домочадцами были казнены большевиками во время Гражданской войны в России, увековечивает память святых Романовых. 56.844369, 60.608346', customIcon7);
        addMarker(56.838140, 60.605772, 'Памятник В. Н. Татищеву и Г. В. де Геннину', 'image/_avatar181.jpg', 'Рука об руку стоят на пьедестале Вильгельм де Геннин и Василий Татищев — основатели Екатеринбурга. 56.838140, 60.605772', customIcon3);
	addMarker(56.839386, 60.616495, 'Екатеринбургский государственный академический театр оперы и балета', 'image/1.jpg', 'Екатеринбýргский госудáрственный академи́ческий теáтр óперы и бале́та (также Урáл Óпера Бале́т) — стационарный театр оперы и балета в Екатеринбурге, основанный в 1912 году. Здание построено по проекту инженера В. Н. Семёнова. Именно здесь 8 ноября (26 октября) 1917 года на экстренном заседании Екатеринбургского Совета рабочих и солдатских депутатов было объявлено об установлении советской власти в городе и на Урале. 56.839386, 60.616495', customIcon8);
	addMarker(56.844982, 60.592162, 'Ельцин Центр', 'image/3.jpg', 'Общественный, культурный и образовательный центр, открытый в Екатеринбурге в 2015 году под эгидой одноимённого фонда. Назван в честь первого президента России Б. Н. Ельцина. 56.844982, 60.592162', customIcon8);
	addMarker(56.847239, 60.610335, 'Екатеринбургский театр юного зрителя', 'image/2.jpg', 'Это старейший и один из самых любимых театров в Екатеринбурге. Он был основан в 30-х годах прошлого века и с тех пор завоевал множество наград, включая национальную театральную премию «Золотая Маска».В репертуаре театра можно найти спектакли для всех возрастов, такие как «Щелкунчик», «Русалочка», «Маугли», «Волшебник Изумрудного города», «Сказки Голубой Феи» и многие другие. 56.847239, 60.610335', customIcon8);
	addMarker(56.847129, 60.597971, 'ГАУ СО Дворец игровых видов спорта', 'image/4.jpg', 'Дворец игровых видов спорта в Екатеринбурге, где собираются и тренируются футбольные, баскетбольные, волейбольные и другие команды со всего города и страны.Здесь постоянно проходят матчи и выставки, на которые могут посмотреть все жители города, а также туристы.Дворец представляет собой большое купольное здание, оснащенное современным оборудованием и построенное согласно всем техникам безопасности. Также здесь проходят различные фитнес-программы и действует тренажерный зал. Рядом с ДИВС открыта гостиница для участников спортивных состязаний и туристов. 56.847129, 60.597971', customIcon11);
	addMarker(56.844962, 60.604803, 'Космос', 'image/5.jpg', 'Построен на проспекте Мира в 1964 году, а в июне 2014 года «Космос» открыл свои двери после масштабного ремонта. «Космос» представляет собой многофункциональный кино-культурный центр с современным оборудованием, низкими ценами на билеты и репертуаром, включающим в себя лучшие российские и зарубежные фильмы, и рассчитанным на самую широкую аудиторию. 56.844962, 60.604803', customIcon8);
	addMarker(56.843212, 60.617570, 'Погибшим в афганской войне Чёрный тюльпан', 'image/6.jpg', 'Мемориал уральским воинам-интернационалистам, погибшим в Афганистане, и воинам, погибшим в Чечне. 56.843212, 60.617570', customIcon3);
	addMarker(56.836879, 60.595622, 'Пассаж', 'image/7.jpg', 'Торговый центр. 56.836879, 60.595622', customIcon16);
	addMarker(56.832364, 60.607568, 'Клавиатура', 'image/8.jpg', 'Жанровая скульптура, которая была создана Анатолием Вяткиным. 56.832364, 60.607568', customIcon3);
	addMarker(56.832439, 60.574191, 'Екатеринбург Арена', 'image/9.jpg', 'Является домашней ареной для футбольного клуба «Урал» и вмещает до 35 696 зрителей. 56.832439, 60.574191', customIcon11);
	addMarker(56.837783, 60.596042, 'В.И.Ленин', 'image/10.jpg', 'Памятник советскому государственному деятелю Владимиру Ильичу Ленину. 56.837783, 60.596042', customIcon3);
	addMarker(56.829333, 60.603803, 'Дендрологический парк', 'image/11.jpg', 'Уникальнейшее место, объединившее в себе сотни растений, неестественных для уральской флоры. Парк включает в себя более 10 гектаров двух сплетенных между собой территорий. 56.829333, 60.603803', customIcon6);
	addMarker(56.826404, 60.604670, 'Екатеринбургский государственный цирк им. В. И. Филатова', 'image/12.jpg', 'Российский стационарный цирк города Екатеринбурга, филиал Федерального казённого предприятия (ФКП) «Российская государственная цирковая компания» (Росгосцирк). С 23 января 2023 года закрыт на двухлетнюю реконструкцию. 56.826404, 60.604670', customIcon8);
	addMarker(56.824699, 60.609204, 'Ледовая Арена', 'image/13.jpg', 'Многофункциональная ледовая арена. Строится на месте снесённой недостроенной телебашни. 56.824699, 60.609204', customIcon11);
	addMarker(56.832932, 60.620577, 'Екатеринбургский зоопарк', 'image/14.jpg', 'Место, где можно увидеть множество животных в их естественной среде обитания. В зоопарке есть просторные вольеры, где животные чувствуют себя комфортно. 56.832932, 60.620577', customIcon15);
	addMarker(56.854674, 60.660464, 'ЦК Урал', 'image/15.jpg', 'Место, где проводятся различные мероприятия, такие как концерты, театральные постановки, танцевальные конкурсы и спортивные соревнования. 56.854674, 60.660464', customIcon8);
	addMarker(56.854405, 60.661494, 'МАУ Спортивный комбинат Урал', 'image/16.jpg', 'Спортивный комбинат «Урал» в Екатеринбурге был создан в 1970 году для работников Уральского электромеханического завода и членов их семей.В 1998 году комплекс перешёл в ведение муниципалитета. На сегодняшний день СК «Урал» является муниципальным бюджетным учреждением.Основные задачи:создание комфортных условий для занятий спортом и активного отдыха горожан;создание необходимых условий для обучения учащихся детских спортивных школ;организация и проведение спортивных соревнований и фестивалей.В СК «Урал» регулярно занимаются более 2000 человек. Наиболее популярны такие направления, как плавание, атлетическая гимнастика, аквааэробика и восточные единоборства. 56.854405, 60.661494', customIcon11);
	addMarker(56.843771, 60.653285, 'Уральский федеральный университет имени первого Президента России Б. Н. Ельцина', 'image/17.jpg', 'Федеральный университет в Екатеринбурге, созданный на базе Уральского государственного технического университета — УПИ имени первого президента России Б. Н. Ельцина по указу президента РФ Д. А. Медведева № 1172 от 21 октября 2009 года.В университете обучаются около 35 000 студентов, в том числе около 32 000 студентов очной формы обучения. Учебный процесс обеспечивают 3782 преподавателя. Обучение осуществляется по 116 направлениям бакалавриата, 190 направлениям магистратуры, 126 специальностям аспирантуры и 42 специальностям докторантуры.С 1 сентября 2017 года Уральский федеральный университет имеет право самостоятельного присуждения учёных степеней. 56.843771, 60.653285', customIcon14);
	addMarker(56.840320, 60.616516, 'Уральский федеральный университет имени первого Президента России Б. Н. Ельцина, Уральский гуманитарный институт', 'image/18.jpg', 'Высшее учебное заведение Екатеринбурга, гуманитарный филиал УрФУ. 56.840320, 60.616516', customIcon14);
	addMarker(56.835912, 60.614548, 'Высоцкий', 'image/19.jpg', 'Гостиница «Высоцкий», расположенная в центре Екатеринбурга, предлагает своим гостям панорамные номера с видом на город. В номерах есть все необходимое для комфортного проживания, включая халаты, банные принадлежности и мини-бар. 56.835912, 60.614548', customIcon8);
	addMarker(56.824606, 60.505347, 'Мега', 'image/20.jpg', 'Ведущий торгово-развлекательный центр. Лучшие магазины, кафе, рестораны и развлечения в одном месте. 56.824606, 60.505347', customIcon16);
	addMarker(56.817257, 60.638097, 'Екатеринбургский центральный парк культуры и отдыха имени В.В. Маяковского', 'image/21.jpg', 'Один из самых популярных парков культуры и отдыха в Екатеринбурге. Он был основан более 80 лет назад и назван в честь поэта Владимира Маяковского. 56.817257, 60.638097', customIcon6);
	addMarker(56.816786, 60.672102, 'лесопарк имени Лесоводов России', 'image/22.jpg', 'Отличное место для пеших и велосипедных прогулок, а также для занятий спортом на свежем воздухе. 56.816786, 60.672102', customIcon6);
	addMarker(56.845612, 60.687333, 'Шарташский лесопарк', 'image/23.jpg', 'Любимое место отдыха для многих жителей Екатеринбурга. Здесь можно прогуляться по живописным тропинкам, насладиться свежим воздухом и покормить белок с рук. 56.845612, 60.687333', customIcon6);
	addMarker(56.842545, 60.678615, 'лесопарк Каменные Палатки', 'image/24.jpg', 'Живописное место, окруженное сосновым лесом, где можно прогуляться и насладиться свежим воздухом. Посетители отмечают, что это место идеально подходит для отдыха с детьми, так как здесь есть детские и спортивные площадки, а также веревочный парк. 56.842545, 60.678615', customIcon6);
	addMarker(56.838246, 60.603525, 'Плотинка', 'image/25.jpg', 'Историческая достопримечательность, расположенная на берегу реки Исеть в Екатеринбурге. Она была построена в 18 веке и с тех пор претерпела несколько реконструкций. 56.838246, 60.603525', customIcon1);
	addMarker(56.901793, 60.567519, 'Парк Победы', 'image/26.jpg', 'Парк культуры и отдыха, расположенный в черте города. 56.901793, 60.567519', customIcon6);
	addMarker(56.829927, 60.599015, 'Гринвич', 'image/27.jpg', 'Торгово-развлекательный центр. 56.829927, 60.599015', customIcon16);
	addMarker(56.810358, 60.561084, 'Свердловская областная клиническая больница № 1', 'image/28.jpg', 'Является крупнейшим лечебным учреждением Уральского района, которое оказывает высокотехнологичную медицинскую помощь жителям Свердловской области. Ежегодно в поликлинике обслуживается свыше 440 000 пациентов, в стационаре получает лечение свыше 35 000 человек, в операционном блоке проводится более 24 000 операций. 56.810358, 60.561084', customIcon5);
	addMarker(56.836243, 60.599944, 'Площадь 1905 года', 'image/M6.jpg', 'Станция метро. 56.836243, 60.599944', customIcon17);
	addMarker(56.826659, 60.603598, 'Геологическая', 'image/M7.jpg', 'Станция метро. 56.826659, 60.603598', customIcon17);
	addMarker(56.807818, 60.610565, 'Чкаловская', 'image/M8.jpg', 'Станция метро. 56.807818, 60.610565', customIcon17);
	addMarker(56.857955, 60.600776, 'Уральская', 'image/M4.jpg', 'Станция метро. 56.857955, 60.600776', customIcon17);
	addMarker(56.847803, 60.599310, 'Динамо', 'image/M5.jpg', 'Станция метро. 56.847803, 60.599310', customIcon17);
	addMarker(56.797360, 60.632942, 'Ботаническая', 'image/M9.jpg', 'Станция метро. 56.797360, 60.632942', customIcon17);
	addMarker(56.878493, 60.612114, 'Машиностроителей', 'image/M3.jpg', 'Станция метро. 56.878493, 60.612114', customIcon17);
	addMarker(56.887774, 60.612827, 'Уралмаш', 'image/M2.jpg', 'Станция метро. 56.887774, 60.612827', customIcon17);
	addMarker(56.900523, 60.614481, 'Проспект Космонавтов', 'image/M1.jpg', 'Станция метро. 56.900523, 60.614481', customIcon17);
	addMarker(56.848842, 60.576984, 'Уральский государственный университет путей сообщения', 'image/29.jpg', 'Уральский государственный университет путей сообщения (УрГУПС) — это крупнейший региональный многопрофильный университет, который в первую очередь ориентирован на кадровое обеспечение железнодорожного транспорта Среднего и Южного Урала. В настоящее время УрГУПС — это вертикально интегрированный образовательный комплекс, расположенный на территории пяти субъектов РФ. Подготовка специалистов ведется в Екатеринбурге, Перми, Кургане, Челябинске и в филиалах Тюмени, Нижнего Тагила, Златоуста. В университете широкий спектр специальностей и направлений подготовки, вот некоторые из них: транспортные и технические; строительные; информационные; направления подготовки в сфере безопасности и экологии; финансово-экономические и управленческие; инновационные. Студенты УрГУПС — лауреаты и победители региональных, всероссийских и международных конкурсов. 56.848842, 60.576984', customIcon14);
	addMarker(56.866325, 60.516984, 'Екатеринбургский музей железнодорожного транспорта', 'image/30.jpg', 'Екатеринбургский музей железнодорожного транспорта — музей под открытым небом на станции Екатеринбург-Сортировочный Свердловской железной дороги создан в 2003 году и насчитывает 14 единиц техники. Здесь также находится единственный построенный советский электровоз ПБ21, привезенный сюда из Перми. 56.866325, 60.516984', customIcon8);
	addMarker(56.841011, 60.606324, 'Литературно-мемориальный дом-музей Д.Н. Мамина-Сибиряка', 'image/31.jpg', 'Дом-музей Д.Н. Мамина-Сибиряка — это место, где можно познакомиться с жизнью и творчеством известного уральского писателя. Музей расположен в деревянном доме, построенном в конце XIX века, который принадлежал семье писателя. 56.841011, 60.606324', customIcon8);
	addMarker(56.816204, 60.537205, 'Радуга Парк', 'image/32.jpg', 'Торгово-развлекательный центр. 56.816204, 60.537205', customIcon16);

        // Обработка клика по карте для добавления нового маркера
        map.on('click', function(e) {
            var form = document.getElementById('markerForm');
            form.style.display = 'block';
            document.getElementById('lat').value = e.latlng.lat;
            document.getElementById('lng').value = e.latlng.lng;
        });

        // Сохранение нового маркера
        function saveMarker() {
            var lat = document.getElementById('lat').value;
            var lng = document.getElementById('lng').value;
            var title = document.getElementById('title').value;
            var imageUrl = document.getElementById('imageUrl').value;
            var description = document.getElementById('description').value;

            // Выбор иконки для нового маркера (по умолчанию используем customIcon1)
            addMarker(lat, lng, title, imageUrl, description, customIcon2);

            // Скрытие формы после добавления маркера
            var form = document.getElementById('markerForm');
            form.style.display = 'none';
            document.getElementById('form').reset();
        }

        // Инициализация маршрутизатора
        var control = L.Routing.control({
            waypoints: [],
            routeWhileDragging: true,
            show: false // Скрыть панель маршрутов
        }).addTo(map);

        // Примеры маршрутов
        var route1 = [
            L.latLng(56.833291, 60.592340), // Точка 1
            L.latLng(56.834789, 60.607897)  // Точка 2
        ];
        
        var route2 = [
            L.latLng(56.826433, 60.595178), // Точка 1
            L.latLng(56.829055, 60.620144)  // Точка 2
        ];

        // Добавление маршрутов на карту
        L.Routing.control({
            waypoints: route1,
            routeWhileDragging: true,
            show: false // Скрыть панель маршрутов
        }).addTo(map);

        L.Routing.control({
            waypoints: route2,
            routeWhileDragging: true,
            show: false // Скрыть панель маршрутов
        }).addTo(map);

    </script>
</body>
</html>
